{
    "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
    "id": "bae07fbb-2096-488a-ab37-adf7808cc9fe",
    "name": "DropValidator",
    "friendlyName": "Drop Validator",
    "description": "Validates a given drop against a manifest generated by the build to verify the integrity of the drop.",
    "helpMarkDown": "",
    "category": "Utility",
    "author": "Microsoft Corporation",
    "preview": true,
    "version": {
        "Major": 0,
        "Minor": 182,
        "Patch": 13
    },
    "visibility": ["Build", "Release"],
    "minimumAgentVersion": "2.115.0",
    "instanceNameFormat": "Drop Validator $(definition)",
    "groups": [
        {
            "name": "advancedOptions",
            "displayName": "Advanced",
            "isExpanded": true
        }
    ],
    "inputs": [
        {
            "name": "BuildDropPath",
            "type": "filePath",
            "label": "The root folder of the drop.",
            "defaultValue": "",
            "required": true
        },
        {
            "name": "ManifestPath",
            "type": "filePath",
            "label": "The path to the manifest file.",
            "defaultValue": "",
            "required": true
        },
        {
            "name": "OutputPath",
            "type": "filePath",
            "label": "The path where the generated output file is placed.",
            "defaultValue": "",
            "required": true
        },
        {
            "name": "Verbosity",
            "type": "pickList",
            "groupName": "advancedOptions",
            "options": {
                "Verbose": "Verbose",
                "Debug": "Debug",
                "Information": "Information",
                "Warning": "Warning",
                "Error": "Error",
                "Fatal": "Fatal"
            },
            "label": "The verbosity of the output generated by the drop validator.",
            "defaultValue": "",
            "required": false
        },
        {
            "name": "ConfigFilePath",
            "type": "string",
            "groupName": "advancedOptions",
            "label": "The json file that contains the configuration for the DropValidator.",
            "defaultValue": "",
            "required": false
        },
        {
            "name": "RootPathFilter",
            "type": "string",
            "groupName": "advancedOptions",
            "label": "If you're downloading only a part of the drop using the '-r' or 'root' parameter in the drop client, specify the same string value here in order to skip validating paths that are not downloaded.",
            "defaultValue": "",
            "required": false
        }
    ],
    "execution": {
        "Node10": {
            "target": "main.js"
        }
    },
    "messages": {
        "TaskFailed": "Drop validation failed, please check output file for more info.",
        "TaskSucceeded": "Drop validation successful.",
        "Error_ToolInstallFailed": "Unable to install DropValidator tool. Err: ( % )",
        "Debug_FailedTelemetry": "Unable to log DropValidatorV0 task telemetry. Err:( % )",
        "Warn_InstallingToolFromLocalRepo": "Unable to install DropValidator tool from remote repository, using local version. Err ( % )",
        "Error_UnableToCreateLocalToolManifest": "Unable to create local tool manifest"
    }
}
