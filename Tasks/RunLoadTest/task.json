{
  "id": "9E9DB38A-B40B-4C13-B7F0-31031C894C22",
  "name": "CloudLoadTest",
  "friendlyName": "Cloud-based Load Test with VSO",
  "description": "Runs the load test in cloud; Powered by VS Online",
  "category": "Test",
  "visibility": [
    "Preview",
    "Build"
  ],
  "author": "Microsoft Corporation",
 "helpMarkDown":"Cloud-based Load Test task can be used to trigger a load test on the Visual Studio Online Cloud-based Load Test Service.\nThe Cloud-based Load Test Service can be used for performance and load testing of your application by generating load from Azure. If you are new to Cloud-based Load Testing then following links will help you:\n* [Cloud-based Load Test with Visual Studio Online](https://www.visualstudio.com/features/vso-cloud-load-testing-vs)\n* Introduction to Cloud-based Load Testing with VSO ([video](http://channel9.msdn.com/Events/Visual-Studio/Launch-2013/qe103))   \n\nTo be successful with this task, you should have already created a load test project with Visual Studio Ultimate with the required web performance tests ([Get Started](https://www.visualstudio.com/get-started/load-test-your-app-vs)) and configured the load test appropriately.  \nTo use this task, you need to supply the folder path to the Load Test directory within your build output where all the load test files including any setup and clean scripts ([learn more](http://blogs.msdn.com/b/visualstudioalm/archive/2015/01/12/using-setup-and-cleanup-script-in-cloud-load-test.aspx)) would be present.  \nOptionally, if your load test is already setup with threshold violations ([learn more about threshold violations](https://msdn.microsoft.com/en-us/library/ff426917.aspx)), then you can specify the number of critical violations to wait for before the load test should be deemed unsuccessful, in which case, the load test would then be aborted and the load test task would be marked as failed.[Additional resources on Cloud-based Load Testing with VSO](http://aka.ms/loadtestkb).  \nIf you have feedback for us, please log them [he(http://visualstudio.uservoice.com/forums/121579-visual-studio/).",
  "version": {
    "Major": 1,
    "Minor": 0,
    "Patch": 1
  },
  "demands": [
    "msbuild"
  ],
  "groups": [
    {
      "name": "advanced",
      "displayName": "Advanced",
      "isExpanded": false
    }
  ],
  "inputs": [
    {
      "name": "TestDrop",
      "type": "filePath",
      "label": "Load test files folder",
      "defaultValue": "$(Build.SourcesDirectory)\\loadtest",
      "required": true,
      "helpMarkDown": "Relative path from build source directory on the agent under which the load test solution output is placed."
    },
    {
      "name": "LoadTest",
      "type": "string",
      "label": "Load test file",
      "defaultValue": "loadtest1.loadtest",
      "required": true,
      "helpMarkDown": "Relative path to the load test filename under the test drop folder defined above."
    },
    {
      "name": "TestSettings",
      "type": "string",
      "label": "Test settings file",
      "defaultValue": "local.testsettings",
      "required": true,
      "helpMarkDown": "Relative path to the test settings filename under the test drop folder defined above."
    },
    {
      "name": "ThresholdLimit",
      "type": "string",
      "label": "Number of permissible threshold violations",      
      "required": false,
      "helpMarkDown": "Number of threshold violations above which the load test outcome is considered unsucessful."
    },
    {
      "name": "VsoAccountUrl",
      "type": "string",
      "label": "VSO account uri",
      "defaultValue": "$(System.TeamFoundationServerUri)",
      "groupName":"advanced",
      "required": true,
      "helpMarkDown": "Visual Studio Online Account URL."
    },
    {
      "name": "Username",
      "type": "string",
      "label": "Alternate credential username",
      "defaultValue": "$(System.Auth.UserName)",
      "groupName":"advanced",
      "required": true
    },
    {
      "name": "Password",
      "type": "string",
      "label": "Alternate credential password",
      "defaultValue": "$(System.Auth.Password)",
      "groupName":"advanced",
      "required": true
    }
  ],
  "instanceNameFormat": "Cloud Load Test $(LoadTest)",
  "execution": {
    "PowerShell": {
      "target": "$(currentDirectory)\\Start-CloudLoadTest.ps1",
      "argumentFormat": "",
      "workingDirectory": "$(currentDirectory)"
    }
  }
}
